<wxs module="util" src="../../utils/wxParse.wxs"></wxs>
<view class="bottom-safe">
  <van-tabs active="{{ active }}" bind:change="onChange">
    <van-tab title="预约登记" custom-class="my-tab">
      <view class="search-content">
        <van-search value="{{ searchVal }}" bind:search="onSearch" bind:clear="onClear" custom-class="search-field" shape="round" placeholder="请输入网点名称/街道名称" />
        <view class="flex-center" bindtap="openPicker">
          <text class="current-city">{{selectedCity}}</text>
          <van-icon name="arrow-down" custom-class="icon-arrow" />
        </view>
      </view>
      <recycle-view batch="{{batchSetRecycleData}}" height="{{viewHeight}}" class="bank-list" id="recycleId">
        <recycle-item wx:for="{{bankList}}" wx:key="deptId" style="width: 100%;">
          <view class="bank-item">
            <view class="flex jc-sb">
              <view class="bank-name">
                <text class="dept-name">{{item.deptName}}</text>
                <text class="recent-status" wx:if="{{item.recent}}">上次预约</text>
              </view>
              <view class="bank-distance">
                <text>{{util.formatDistance(item.distance)}}</text>
                <image src="/assets/cashReserve/position.png" />
              </view>
            </view>
            <view class="bank-address">{{item.addr}}</view>
            <view class="btn-content">
              <view class="opera" data-type="1" data-item="{{item}}" bindtap="goCashOpera" wx:if="{{item.onlineLargeCashBookFlag === '1'}}">
                <image src="/assets/cashReserve/largeCash.png" />
                <text>大额取现</text>
              </view>
              <view wx:if="{{item.onlineLargeCashBookFlag === '1' && item.moneyChangeScheduleFlag === '1'}}" class="line"></view>
              <view class="opera" data-type="2" data-item="{{item}}" bindtap="goCashOpera" wx:if="{{item.moneyChangeScheduleFlag === '1'}}">
                <image src="/assets/cashReserve/smallCash.png" />
                <text>零钞兑换</text>
              </view>
            </view>
          </view>
        </recycle-item>
      </recycle-view>
      <my-picker show="{{ showPicker }}" columns="{{ columns }}" title="选择城市" bind:change="handlePicker" bind:cancel="onPickerCancel" bind:confirm="onPickerConfirm" />
    </van-tab>
    <van-tab title="我的预约">
      <view class="record-list">
        <view class="record-item">
          <view class="record-status">
            <text>大额取款</text>
            <text>已登记</text>
          </view>
          <view class="record-bank-name">
            赣州银行黄金分行
          </view>
          <view class="record-customer-msg">
            <text>6219 **** **** 0017</text>
            <text>王*二</text>
          </view>
          <view class="record-msg">
            <text>预约时间</text>
            <text>2020-12-12 12:00-13:00</text>
          </view>
          <view class="record-msg" wx:if="{{recordType === 0}}">
            <text>取款金额</text>
            <text class="record-amount">￥300</text>
          </view>
          <view wx:else>
            <view class="record-msg">
              <text>零钞面额</text>
              <text class="record-amount">5元*100张；10元100张；5角*2000枚；1角*3000枚</text>
            </view>
            <view class="record-msg">
              <text>兑换整钞金额</text>
              <text class="record-amount">￥300</text>
            </view>
          </view>
          <view class="record-msg">
            <text>地址</text>
            <text>江西省赣州市章贡区赣江源大道15号</text>
          </view>
          <view class="record-cancel" bindtap="onCancel">取消预约</view>
        </view>
      </view>
    </van-tab>
  </van-tabs>
</view>
<van-toast id="van-toast" />